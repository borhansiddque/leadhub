# LeadHub Project Documentation

LeadHub is a high-performance marketplace for business leads. This document provides a technical and operational overview of the system.

## ðŸ›ï¸ System Architecture

### Frontend
- **Framework**: Next.js 14 (App Router)
- **State Management**: React `useState` and `useEffect` hooks, `AuthContext` for user session management.
- **Styling**: Vanilla CSS for maximum performance and custom aesthetics (Glassmorphism).

### Backend
- **Database**: Firebase Firestore.
- **Authentication**: Firebase Auth (Email/Password).
- **Security**: Role-based access control (RBAC) via Firestore rules.

## ðŸ”„ Core Workflows

### 1. Lead Lifecycle
- **Entry**: Leads can be added manually or bulk uploaded (CSV/Excel) via the Admin panel.
- **Discovery**: Users browse the marketplace using dynamic filters (Industry, Location, Job Title).
- **Purchase**: Leads are added to a cart and "ordered."
- **Approval**: Orders start as `pending`. An admin must manually approve the order in `/admin/orders`.
- **Reveal**: Once approved, the lead's sensitive contact info (Email, Website, Socials) is revealed to the user in their dashboard.

### 2. Marketplace Advanced Search
- **Dynamic Filters**: Dropdowns for Job Title and Location are populated from the database.
- **Map View**: Integrated Leaflet map shows lead locations with interactive markers.
- **Search**: Debounced searching ensures smooth UI performance.

## âš¡ Performance & Optimization

### Firebase Free Tier Efficiency
The app is optimized to stay within the 50k reads/day limit:
- **Session Caching**: Meta-data for filters is cached in `sessionStorage` to avoid redundant reads on page navigation.
- **Metadata Sampling**: Filters are generated by sampling a subset of the database (limit: 150-200) rather than scanning the entire collection.
- **Intelligent Invalidation**: The cache is automatically cleared when an admin makes data changes, ensuring consistency.

## ðŸ› ï¸ Admin Guide

### Access
Admin pages are located at:
- `/admin/leads`: Inventory management and bulk uploads.
- `/admin/orders`: Order verification and revenue tracking.

### Lead Bulk Upload
- Supports `.csv` and `.xlsx`.
- Automatically normalizes headers (e.g., "Company Name" -> `websiteName`).
- Assigns a default price of **$0.50** if not specified.

## ðŸ”‘ Environment Variables
Required keys in `.env.local`:
- `NEXT_PUBLIC_FIREBASE_API_KEY`
- `NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN`
- `NEXT_PUBLIC_FIREBASE_PROJECT_ID`
- `NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET`
- `NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID`
- `NEXT_PUBLIC_FIREBASE_APP_ID`
